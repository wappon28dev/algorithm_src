# ２年２学期期末 アルゴリズムまとめ

## 目次
<details><summary>クリック/タップ して目次を表示</summary><div>

- [２年２学期期末 アルゴリズムまとめ](#２年２学期期末-アルゴリズムまとめ)
  - [目次](#目次)
  - [3-1 配列](#3-1-配列)
    - [☆配列とは](#配列とは)
    - [☆さらに詳しく](#さらに詳しく)
      - [1 - 2次元配列](#1---2次元配列)
      - [文字配列](#文字配列)
    - [☆書き方](#書き方)
      - [１次元配列](#１次元配列)
      - [２次元配列](#２次元配列)
      - [文字配列](#文字配列-1)
    - [☆教科書問題](#教科書問題)
      - [１次元配列の宣言とデータの格納](#１次元配列の宣言とデータの格納)
      - [定数を使用した１次元配列の宣言](#定数を使用した１次元配列の宣言)
      - [２次元配列へのデータの格納](#２次元配列へのデータの格納)
      - [２次元配列への文字データの格納](#２次元配列への文字データの格納)
      - [文字列処理関数を使った文字列の表示](#文字列処理関数を使った文字列の表示)
      - [３章 章末問題](#３章-章末問題)
    - [☆肝に銘じたほうが良いこと](#肝に銘じたほうが良いこと)
  - [3-2 関数](#3-2-関数)
    - [☆関数とは](#関数とは)
    - [☆さらに詳しく](#さらに詳しく-1)
      - [関数とサブルーチン](#関数とサブルーチン)
    - [☆書き方](#書き方-1)
      - [引数なし, 戻り値なし の関数](#引数なし-戻り値なし-の関数)
      - [引数あり, 戻り値なし](#引数あり-戻り値なし)
      - [引数あり, 戻り値あり](#引数あり-戻り値あり)
      - [プロトタイプ宣言](#プロトタイプ宣言)
    - [☆教科書問題](#教科書問題-1)
      - [関数の戻り値と引数を調べる](#関数の戻り値と引数を調べる)
      - [年齢による料金表示プログラムの関数化](#年齢による料金表示プログラムの関数化)
      - [変数の有効範囲の確認](#変数の有効範囲の確認)
    - [☆肝に銘じたほうが良いこと](#肝に銘じたほうが良いこと-1)
  - [4-1 基本的な数値計算](#4-1-基本的な数値計算)
    - [☆合計・平均・分散・標準偏差とは](#合計平均分散標準偏差とは)
      - [合計](#合計)
      - [平均](#平均)
      - [分散](#分散)
      - [標準偏差](#標準偏差)
    - [☆教科書問題](#教科書問題-2)
      - [年間降水量と平均降水量を求める](#年間降水量と平均降水量を求める)
  - [4-2 アルゴリズムの工夫](#4-2-アルゴリズムの工夫)
    - [☆誤差の種類](#誤差の種類)
    - [教科書問題](#教科書問題-3)
      - [情報落ちの確認](#情報落ちの確認)
      - [降順と昇順の加算結果の比較](#降順と昇順の加算結果の比較)
</div></details>

## 3-1 配列

### ☆配列とは

同じデータ型の複数の要素を１つにまとめたデータ構造のことを **配列 (array)** という.  
また, 配列を構成している要素を指定するには, それぞれの要素に付けられた **添字 (index)** と呼ばれる一連の番号を使用する.

### ☆さらに詳しく

#### 1 - 2次元配列
配列の要素を指定するには、配列名の後に, `()`や`[]`でくくって添字を付け, `a(3)`や`a[3]`のように表す.  
このように, 添え字が１つの配列を **１次元配列 (linear/1D array)** という.  
また, `a(2,3)`や`a[2][3]`のように, 配列の添字が２つある配列を **２次元配列 (2D array)** という.  

#### 文字配列
C言語で文字列 (string) を表すときは, 文字型の配列を利用して文字列を表す, データ領域は, `最大文字数 + 1` 分用意する.

### ☆書き方
#### １次元配列

```c
// １次元配列の宣言
int arr1d[6] = {1, 4, 1, 4, 2, 1};
```
`arr1d`の構造:
| index | 0   | 1   | 2   | 3   | 4   | 5   |
| ----- | --- | --- | --- | --- | --- | --- |
| value | `1` | `4` | `1` | `4` | `2` | `1` |

| 添字 (index) | アドレス (addr) | 中に入っている値 (value) |
| ------------ | --------------- | ------------------------ |
| 0            | `arr1d[0]`      | `1`                      |
| 1            | `arr1d[1]`      | `4`                      |
| 2            | `arr1d[2]`      | `1`                      |
| 3            | `arr1d[3]`      | `4`                      |
| 4            | `arr1d[4]`      | `2`                      |
| 5            | `arr1d[5]`      | `1`                      |
| 6            | `arr1d[6]`      | `\0`                     |

#### ２次元配列
```c
// ２次元配列の宣言
int arr2d[3][6] = {{1, 4, 1, 4, 2, 1}, {1, 7, 3, 2, 0, 5}, {2, 2, 3, 6, 0, 6}};
```
`arr2d`の構造:
| y\\x | 0   | 1   | 2   | 3   | 4   | 5   |
| ---- | --- | --- | --- | --- | --- | --- |
| 0    | `1` | `4` | `1` | `4` | `2` | `1` |
| 1    | `1` | `7` | `3` | `2` | `0` | `5` |
| 2    | `2` | `2` | `3` | `6` | `0` | `6` |


| y添字 (index-y) | x添字 (index-x) | アドレス (addr) | 中に入っている値 (value) |
| --------------- | --------------- | --------------- | ------------------------ |
| 0               | 0               | `arr1d[0][0]`   | `1`                      |
| 0               | 1               | `arr1d[0][1]`   | `4`                      |
| ︙               | ︙               | ︙               | ︙                        |
| 1               | 2               | `arr1d[1][2]`   | `3`                      |
| 1               | 3               | `arr1d[1][3]`   | `2`                      |
| ︙               | ︙               | ︙               | ︙                        |
| 2               | 4               | `arr1d[2][4]`   | `0`                      |
| 2               | 5               | `arr1d[2][5]`   | `6`                      |
| ︙               | ︙               | ︙               | ︙                        |
| 3               | 6               | `arr1d[3][6]`   | `\0`                     |

#### 文字配列
下のコードで宣言された値は, どれも同一である.
```c
// 文字数の明示指定
char str[6] = {'H', 'y', 'o', 'd', 'o', '\0'};
// 文字数の指定なし   
char str[] = {'H', 'y', 'o', 'd', 'o', '\0'};
// ダブルクオーテーションで括ると, `\0` の必要なし
char str[] = "Hyodo";
```
| index | 0   | 1   | 2   | 3   | 4   | 5    |
| ----- | --- | --- | --- | --- | --- | ---- |
| value | `H` | `y` | `o` | `d` | `o` | `\0` |

### ☆教科書問題
#### １次元配列の宣言とデータの格納
- [例題１](./p58_r1.c)
  - [練習問題](./p58_ren.c)

#### 定数を使用した１次元配列の宣言
- [例題２](./p59_r2.c)
  - [練習問題](./p59_ren.c)

#### ２次元配列へのデータの格納
-   [例題３](./p60_r3.c)
    -   [練習問題](./p60_ren.c)
    -   [練習問題](./p60_ren2.c): １次元配列での宣言

#### ２次元配列への文字データの格納
-   [例題４](./p61_r4.c)
    -   [練習問題](./p61_ren.c)

#### 文字列処理関数を使った文字列の表示
- [例題５](./p63_r5.c)

#### ３章 章末問題
- [１](./p84_1.c)
- [２](./p84_2.c)
- [３](./p84_3.c)
- [４](./p84_4.c): 自己流注意

### ☆肝に銘じたほうが良いこと
1. 配列は, **いくつかの変数をくっつけたもの** のような感じだ.  
   > 同じデータ型なら, `int` でも `float` でも 言語によるが, 関数でさえも入れられるぞ.
   
1. お前はまず, **配列の添字は `0` から始まること**を忘れてはならない.  
   > これは, 配列の最初に入っている値からの距離のことだと考えるとわかりやすいぞ.

1. 文字配列を宣言するときのサイズは, **`最大数 + 1`** だ. 忘れるな.  
   > これは, 文字列の終端にヌル文字 `\0` を入れるからだ.  
   証明の終わりの`■`や`//`だと思え.

1. 文字列を操作する関数を呼び出すときは, **`string.h`の`include`を忘れずに** せよ.  
   > 文字列を操作する関数は, `strcpy`関数などのことだ.  
   ちなみにこの関数は破壊的で, TypeScriptで表すと  
   ```ts
    function strcpy(a: string, b: string): void {
        a += b;
    }
   ```
   > のような感じだ. 考えるな, よく読んで感じろ.

1. 文字の回転が怖い？ **これは覚えろ**

    > 縦と横の長さである 6 を 定数 `HW` として宣言すると,
   ``` c
    char c[HW][HW] = {
        {' ', ' ', ' ', ' ', ' ', ' '},
        {' ', '*', '*', '*', '*', '*'},
        {' ', '*', '*', '*', '*', ' '},
        {' ', '*', '*', '*', ' ', ' '},
        {' ', '*', '*', ' ', ' ', ' '},
        {' ', '*', ' ', ' ', ' ', ' '},
    };

    int i, j;

    for (i = 1; i <= 5; i++)        // または, i <= (HW) - 1
    {
        for (j = 1; j <= 5; j++)    // または, i <= (HW) - 1
        {
            printf("%c ", /* foo */);
        }
        printf("\n");
    }
   ```

    `foo`について:
   | 回転 (左回り) | 変数名                                                   | コメント                  |
   | ------------- | -------------------------------------------------------- | ------------------------- |
   | 0             | `c[i][j]`                                                | そのままだ                |
   | 90°           | `c[j][5 - (i - 1)]` <br /> `c[j][HW - i]`                | 逆にして`x(i)` をいじる   |
   | 180°          | `c[5 - (i - 1)][5 - (j - 1)]` <br /> `c[HW - i][HW - j]` | `i`, `j` をそれぞれいじる |
   | 270°          | `c[5 - (j - 1)][i]`  <br /> `c[HW - j][i]`               | 逆にして `y(j)` をいじる  |
   

    ```
        0°                90°                  180°                 270°

     * * * * *          *                            *             * * * * *
     * * * *            * *                        * *               * * * *
     * * *              * * *                    * * *                 * * *
     * *                * * * *                * * * *                   * *
     *                  * * * * *            * * * * *                     *

      [i][j]           [j][HW - i]        [HW - i][HW - j]         [HW - j][i]
    ```
    [FULL](./p84_4.c)


    <details><summary>茶番</summary><div>

    教科書だと最初に余白を付けているせいで, ややこしくなっている.  
    本来ならばそんな難しくないぞ...

    縦と横の長さである 5 を 定数 `HW` として宣言すると,
   ``` c
    char character[HW][HW] = {
        {'*', '*', '*', '*', '*'},
        {'*', '*', '*', '*', ' '},
        {'*', '*', '*', ' ', ' '},
        {'*', '*', ' ', ' ', ' '},
        {'*', ' ', ' ', ' ', ' '},
    };

    int i, j;

    for (i = 0; i < HW; i++)
    {
        for (j = 0; j < HW; j++)
        {
            printf("%c ", /* foo */);
        }
        printf("\n");
    }
   ```

    `foo`について:
   | 回転 (左回り) | 変数名                      | コメント                 |
   | ------------- | --------------------------- | ------------------------ |
   | 0             | `c[i][j]`                   | そのままだ               |
   | 90°           | `c[j][HW - 1 - i]`          | 逆にして `x(i)` をいじる |
   | 180°          | `c[HW - 1 - i][HW - 1 - j]` | i, j でいじる            |
   | 270°          | `c[HW - 1 - j][i]`          | 逆にして `y(j)` をいじる |

    ```
        0°                90°                  180°                 270°

     * * * * *          *                            *             * * * * *
     * * * *            * *                        * *               * * * *
     * * *              * * *                    * * *                 * * *
     * *                * * * *                * * * *                   * *
     *                  * * * * *            * * * * *                     *

      [i][j]        [j][HW - 1 - i]    [HW - 1 - i][HW - 1 - j]   [HW - 1 - j][i]
    ```

    [FULL](./p84_4_mod.c)

    ほら簡単で単純だろ？ だが, たぶん余白があるせいでこれは使えない...残念だ...

   </div></details>

## 3-2 関数
### ☆関数とは
実用的なプログラムを作ろうとすると, プログラムが長くなり, 全体がわかりにくいものになってしまうことが多い.  
プログラム中で同じような処理を何度も行う場合, **関数 (function)** や **サブルーチン (subroutine)** に分けておく.  
関数やサブルーチンなどの副プログラムに渡す値を **引数 (arguments)** という.
### ☆さらに詳しく
#### 関数とサブルーチン
戻り値がある副プログラムを **関数** といい, 戻り値のない副プログラムは **サブルーチン** という.  
また, 多くのプログラム言語では, プログラム全体で共通して使える **大域/グローバル 変数 (global variables)** と  
副プログラムの中だけで使える **局所/ローカル 変数 (local variables)** という.  
このような変数が有効な範囲を **スコープ (scope)** という.  
### ☆書き方
#### 引数なし, 戻り値なし の関数
```c
void askNums(void)
{
    int a, b;

    printf("a   => ");
    scanf("%d", &a);
    printf("b   => ");
    scanf("%d", &b);

    printf("sum => %d\n", a + b);
}

// 呼び出し: askNums(); -> void
```
#### 引数あり, 戻り値なし
```c
void showSum(int a, int b)
{
    printf("sum => %d\n", a + b);
}
// 呼び出し: showSum(3, 5); -> void
```
#### 引数あり, 戻り値あり
```c
int calculateSum(int a, int b) { return a + b; }
// 呼び出し: calculateSum(3, 5); -> 8

```
#### プロトタイプ宣言
上の関数のプロトタイプ宣言:
```c
#include <stdio.h>

int calculateSum(int a, int b); // <- こ↑こ↓

int main(){
    ...
}

...

int calculateSum(int a, int b){
    ...
}
```
関数の処理を書かないバージョンだと思えば良い.  
abstract みたいだね (小声)  
main関数の前 (使う前の関数) にプロトタイプ宣言を置こう.

### ☆教科書問題
#### 関数の戻り値と引数を調べる
-   [例題 1-1](./p70_r1_1.c)
-   [例題 1-2](./p70_r1_2.c)
-   [例題 1-3](./p70_r1_3.c)
    - [練習問題](./p71_ren.c)

#### 年齢による料金表示プログラムの関数化
- [例題２](./p72_r2.c)
  - [練習問題](./p72_ren.c)

#### 変数の有効範囲の確認
-   [例題３](./p73_r3.c)

### ☆肝に銘じたほうが良いこと
// 後で書く

## 4-1 基本的な数値計算
### ☆合計・平均・分散・標準偏差とは
覚えなくて良いから, 省略.

<details><summary>見たい方はどうぞ</summary><div>

#### 合計
値の総和を **合計 (sum)** という.
$$
    \begin{equation*}
        合計 = 入力データの総和 
    \end{equation*}
$$
#### 平均
$$
    平均 = \frac{入力データの総和}{入力データ数} = \frac{合計}{入力データ数}
$$

#### 分散
**分散 (variance)** は, それぞれの入力データと平均値との差を求め, その２乗の総和を入力データ数で割ったものである.
$$
    分散 = \frac{(入力データ - 平均値)^2の総和}{入力データ数} = \frac{(入力データ)^2の総和}{入力データ数} - (平均値)^2
$$
#### 標準偏差
**標準偏差 (SD)** は, 分散の正の平方根である.
$$
    標準偏差 = \sqrt{分散}
$$

</div></details>

### ☆教科書問題
#### 年間降水量と平均降水量を求める
-   [例題１](./p88_r1.c)
-   [例題２](./p89_r2.c)
    -   [練習問題](./p89_ren.c)

## 4-2 アルゴリズムの工夫
### ☆誤差の種類
実際の解 (**真値 (true value)**) と **近似値 (approximate value)** (コンピュータなどで計算した値) との差を **誤差 (error)** あるいは **絶対誤差 (absolute error)** という.  
誤差には以下の種類がある.

| 誤差の種類 | 説明                                                                                                        |
| ---------- | ----------------------------------------------------------------------------------------------------------- |
| 計算機誤差 | 計算の絶対値が, オーバー/アンダー フロー したときの誤差                                                     |
| 丸め誤差   | データ型の制限により, 以下の桁を丸めたときの誤差                                                            |
| 打切り誤差 | あるところで打ち切って近似値を求める場合に生じる誤差                                                        |
| 桁落ち     | 大きさが小さい２つの数の引き算時に, 有効桁数が減ることで生じる誤差                                          |
| 情報落ち   | 絶対値が非常に大きい数と小さい数を加減算するときに,<br />小さい数が計算に反映されないことによって生じる誤差 |

### 教科書問題
#### 情報落ちの確認
-   [例題１](./p94_r1.c)

#### 降順と昇順の加算結果の比較
-   [例題２](./p95_r2.c)

